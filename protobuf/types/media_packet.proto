syntax = "proto3";

message MediaPacket {
  enum MediaType {
    MEDIA_TYPE_UNKNOWN = 0;
    VIDEO = 1;
    AUDIO = 2;
    SCREEN = 3;
    HEARTBEAT = 4;
    RTT = 5;  // Client to Server RTT
  }
  MediaType media_type = 1;
  string email = 2;
  bytes data = 3;
  string frame_type = 4;
  double timestamp = 5;
  double duration = 6;
  AudioMetadata audio_metadata = 7;
  VideoMetadata video_metadata = 8;
  HeartbeatMetadata heartbeat_metadata = 9;
}

message AudioMetadata {
  string audio_format = 1;
  uint32 audio_number_of_channels = 2;
  uint32 audio_number_of_frames = 3;
  float audio_sample_rate = 4;
  uint64 sequence = 5;
}

message VideoMetadata {
  uint64 sequence = 1;
  VideoCodec codec = 2;
}

// Video codec enum with profile/level details for scalability.
// Format follows WebCodecs codec string conventions where applicable.
enum VideoCodec {
  VIDEO_CODEC_UNSPECIFIED = 0;  // Default - skip decoding if codec not specified

  // VP8 - no profile/level variants
  VP8 = 1;

  // VP9 profiles: vp09.PP.LL.DD (Profile, Level, bit Depth)
  VP9_PROFILE0_LEVEL10_8BIT = 2;  // vp09.00.10.08 - Profile 0, Level 1.0, 8-bit

  // H.264/AVC - requires description field in decoder config
  // AVC_BASELINE_LEVEL30 = 20;  // avc1.42001E - Baseline, Level 3.0
  // AVC_MAIN_LEVEL31 = 21;      // avc1.4D001F - Main, Level 3.1
  // AVC_HIGH_LEVEL40 = 22;      // avc1.640028 - High, Level 4.0

  // AV1 profiles
  // AV1_MAIN_LEVEL21_8BIT = 30;  // av01.0.01M.08 - Main, Level 2.1, 8-bit
}

message HeartbeatMetadata {
  bool video_enabled = 1;
  bool audio_enabled = 2;
  bool screen_enabled = 3;
}